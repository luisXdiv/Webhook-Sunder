<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Discord Webhook Builder</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #5865f2;
      --primary-hover: #4752c4;
      --bg-primary: #36393f;
      --bg-secondary: #2f3136;
      --bg-tertiary: #202225;
      --text-normal: #dcddde;
      --text-muted: #b9bbbe;
      --border-radius: 8px;
      --transition: all 0.2s ease;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg-tertiary);
      color: var(--text-normal);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.5;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1.2fr;
      gap: 24px;
      height: calc(100vh - 40px);
    }

    .panel {
      background: var(--bg-secondary);
      padding: 24px;
      border-radius: var(--border-radius);
      overflow-y: auto;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .panel h2 {
      color: var(--primary);
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(79, 84, 92, 0.48);
    }

    .panel h3 {
      color: var(--text-normal);
      font-size: 1rem;
      font-weight: 600;
      margin: 20px 0 12px;
    }

    input, textarea, select {
      width: 100%;
      padding: 10px 12px;
      margin: 6px 0 16px;
      background: var(--bg-tertiary);
      border: 1px solid rgba(79, 84, 92, 0.3);
      border-radius: 4px;
      color: var(--text-normal);
      font-family: inherit;
      font-size: 0.9375rem;
      transition: var(--transition);
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(88, 101, 242, 0.3);
    }

    textarea {
      min-height: 80px;
      resize: vertical;
    }

    button {
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 10px 16px;
      font-weight: 500;
      font-size: 0.9375rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      margin: 8px 0;
      width: 100%;
    }

    button:hover {
      background: var(--primary-hover);
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
    }

    .preview {
      background: var(--bg-primary);
      padding: 24px;
      border-radius: var(--border-radius);
      overflow-y: auto;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .preview h2 {
      color: var(--text-normal);
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 20px;
    }

    .embed {
      background: var(--bg-secondary);
      border-left: 4px solid var(--primary);
      padding: 16px;
      border-radius: 4px;
      max-width: 100%;
      word-wrap: break-word;
    }

    .embed .author {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
      font-weight: 500;
    }

    .embed .author img {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      margin-right: 8px;
      object-fit: cover;
    }

    .embed .title {
      font-weight: 600;
      font-size: 1rem;
      margin-bottom: 8px;
      color: #fff;
    }

    .embed .description {
      white-space: pre-line;
      margin-bottom: 12px;
      color: var(--text-normal);
    }

    .embed .thumbnail {
      float: right;
      width: 80px;
      height: 80px;
      border-radius: 4px;
      margin: 0 0 12px 12px;
      object-fit: cover;
    }

    .embed .image {
      max-width: 100%;
      border-radius: 4px;
      margin-top: 12px;
      display: block;
    }

    .embed .fields {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin: 12px 0;
    }

    .embed .field {
      background: rgba(32, 34, 37, 0.5);
      padding: 10px;
      border-radius: 4px;
    }

    .embed .field-name {
      font-weight: 600;
      font-size: 0.875rem;
      margin-bottom: 4px;
      color: #fff;
    }

    .embed .field-value {
      font-size: 0.875rem;
      color: var(--text-muted);
    }

    .embed .footer {
      display: flex;
      align-items: center;
      font-size: 0.75rem;
      margin-top: 12px;
      color: var(--text-muted);
    }

    .embed .footer img {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      margin-right: 6px;
      object-fit: cover;
    }

    .button-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin: 16px 0;
    }

    .button-group button {
      margin: 0;
    }

    .file-input {
      display: none;
    }

    .file-label {
      display: block;
      text-align: center;
      padding: 10px;
      background: var(--bg-tertiary);
      border-radius: 4px;
      cursor: pointer;
      transition: var(--transition);
      margin: 8px 0 16px;
      border: 1px dashed rgba(79, 84, 92, 0.3);
    }

    .file-label:hover {
      background: rgba(79, 84, 92, 0.16);
    }

    @media (max-width: 1024px) {
      .container {
        grid-template-columns: 1fr;
        height: auto;
      }
      
      .panel, .preview {
        height: 70vh;
      }
    }

    @media (max-width: 640px) {
      body {
        padding: 12px;
      }
      
      .panel, .preview {
        padding: 16px;
      }
      
      .embed .fields {
        grid-template-columns: 1fr;
      }
      
      .button-group {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="panel">
      <h2>Webhook Settings</h2>
      <input id="webhookUrl" placeholder="https://discord.com/api/webhooks/...">
      <input id="botName" placeholder="Bot Username">
      <input id="botAvatar" placeholder="https://example.com/avatar.png">

      <h2>Embed Settings</h2>
      <input id="title" placeholder="Title">
      <textarea id="description" placeholder="Description"></textarea>
      <div style="display: flex; align-items: center; gap: 10px; margin: 5px 0 15px;">
        <label for="color" style="font-size: 0.9rem; color: var(--text-muted);">Color:</label>
        <input id="color" type="color" value="#5865f2" style="width: 60px; height: 30px; padding: 0;">
      </div>
      <label style="display: flex; align-items: center; gap: 8px; margin: 10px 0 20px; cursor: pointer;">
        <input type="checkbox" id="timestamp" style="width: auto;">
        <span>Include Timestamp</span>
      </label>

      <h3>Author</h3>
      <input id="authorName" placeholder="Author Name">
      <input id="authorUrl" placeholder="https://example.com/author" type="url">
      <input id="authorIcon" placeholder="https://example.com/author.png" type="url">

      <h3>Media</h3>
      <input id="thumbnailUrl" placeholder="https://example.com/thumbnail.png" type="url">
      <input id="imageUrl" placeholder="https://example.com/image.png" type="url">

      <h3>Footer</h3>
      <input id="footerText" placeholder="Footer Text">
      <input id="footerIcon" placeholder="https://example.com/icon.png" type="url">

      <h3>Fields</h3>
      <div id="fields"></div>
      <button onclick="addField()" style="margin-top: 10px;">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <line x1="5" y1="12" x2="19" y2="12"></line>
        </svg>
        Add Field
      </button>

      <h2>Config</h2>
      <div class="button-group">
        <button onclick="saveConfig()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
            <polyline points="17 21 17 13 7 13 7 21"></polyline>
            <polyline points="7 3 7 8 15 8"></polyline>
          </svg>
          Save
        </button>
        <button onclick="loadConfig()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Load
        </button>
      </div>
      
      <div class="button-group">
        <button onclick="exportConfig()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Export
        </button>
        <label class="file-label" for="importFile">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          Import
        </label>
        <input type="file" id="importFile" class="file-input" onchange="importConfig(event)">
      </div>

      <h2>Actions</h2>
      <div class="button-group">
        <button onclick="sendWebhook()" style="background: #3ba55c;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
          Send Webhook
        </button>
        <button onclick="copyJson()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
          </svg>
          Copy JSON
        </button>
      </div>
    </div>

    <div class="preview">
      <h2>Live Preview</h2>
      <div id="embedPreview" class="embed">
        <div style="color: var(--text-muted); text-align: center; padding: 20px;">
          Your embed preview will appear here
        </div>
      </div>
    </div>
  </div>

<script>
let fields = [];

function updatePreview() {
  const title = document.getElementById("title").value;
  const desc = document.getElementById("description").value;
  const color = document.getElementById("color").value;
  const authorName = document.getElementById("authorName").value;
  const authorUrl = document.getElementById("authorUrl").value;
  const authorIcon = document.getElementById("authorIcon").value;
  const thumb = document.getElementById("thumbnailUrl").value;
  const img = document.getElementById("imageUrl").value;
  const footerText = document.getElementById("footerText").value;
  const footerIcon = document.getElementById("footerIcon").value;
  const ts = document.getElementById("timestamp").checked ? new Date().toLocaleString() : "";

  let hasContent = false;
  let html = `<div style="border-left: 4px solid ${color}; padding-left: 12px;">`;
  
  // Author
  if (authorName) {
    hasContent = true;
    if (authorUrl) {
      html += `<div class="author">${authorIcon ? `<img src="${authorIcon}" onerror="this.style.display='none'">` : ''}<a href="${authorUrl}" style="color: #00aff4; text-decoration: none;">${authorName}</a></div>`;
    } else {
      html += `<div class="author">${authorIcon ? `<img src="${authorIcon}" onerror="this.style.display='none'">` : ''}${authorName}</div>`;
    }
  }

  // Title
  if (title) {
    hasContent = true;
    html += `<div class="title">${title}</div>`;
  }

  // Description
  if (desc) {
    hasContent = true;
    html += `<div class="description">${desc.replace(/\n/g, '<br>')}</div>`;
  }

  // Fields
  const hasFields = fields.some(f => f.name || f.value);
  if (hasFields) {
    hasContent = true;
    html += '<div class="fields">';
    fields.forEach(f => {
      if (f.name || f.value) {
        html += `
        <div class="field">
          ${f.name ? `<div class="field-name">${f.name}</div>` : ''}
          ${f.value ? `<div class="field-value">${f.value.replace(/\n/g, '<br>')}</div>` : ''}
        </div>`;
      }
    });
    html += '</div>';
  }

  // Thumbnail (floated right)
  if (thumb) {
    hasContent = true;
    html += `<img class="thumbnail" src="${thumb}" onerror="this.style.display='none'">`;
  }

  // Main Image
  if (img) {
    hasContent = true;
    html += `<img class="image" src="${img}" onerror="this.style.display='none'">`;
  }

  // Footer
  if (footerText || ts) {
    hasContent = true;
    html += '<div class="footer">';
    if (footerIcon) {
      html += `<img src="${footerIcon}" onerror="this.style.display='none'">`;
    }
    if (footerText) {
      html += `<span>${footerText}</span>`;
    }
    if (ts) {
      if (footerText) html += ' â€¢ ';
      html += `<span>${ts}</span>`;
    }
    html += '</div>';
  }

  html += '</div>';
  
  const preview = document.getElementById("embedPreview");
  if (hasContent) {
    preview.innerHTML = html;
  } else {
    preview.innerHTML = '<div style="color: var(--text-muted); text-align: center; padding: 20px;">Your embed preview will appear here</div>';
  }
}

function addField() {
  const idx = fields.length;
  fields.push({name:"", value:""});
  const div = document.createElement("div");
  div.style.marginBottom = "12px";
  div.style.display = "grid";
  div.style.gap = "8px";
  div.style.gridTemplateColumns = "1fr 1fr";
  div.innerHTML = `
    <input placeholder="Field Name" oninput="fields[${idx}].name=this.value;updatePreview()" style="margin: 0;">
    <input placeholder="Field Value" oninput="fields[${idx}].value=this.value;updatePreview()" style="margin: 0;">
  `;
  document.getElementById("fields").appendChild(div);
  updatePreview();
}

function getEmbedJson() {
  return {
    username: document.getElementById("botName").value,
    avatar_url: document.getElementById("botAvatar").value,
    embeds: [{
      title: document.getElementById("title").value,
      description: document.getElementById("description").value,
      color: parseInt(document.getElementById("color").value.substring(1),16),
      timestamp: document.getElementById("timestamp").checked ? new Date() : undefined,
      author: {
        name: document.getElementById("authorName").value,
        url: document.getElementById("authorUrl").value,
        icon_url: document.getElementById("authorIcon").value
      },
      thumbnail: { url: document.getElementById("thumbnailUrl").value },
      image: { url: document.getElementById("imageUrl").value },
      footer: {
        text: document.getElementById("footerText").value,
        icon_url: document.getElementById("footerIcon").value
      },
      fields: fields
    }]
  };
}

function sendWebhook() {
  const url = document.getElementById("webhookUrl").value;
  fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(getEmbedJson())});
  alert("Webhook Sent!");
}

function copyJson() {
  navigator.clipboard.writeText(JSON.stringify(getEmbedJson(),null,2));
  alert("JSON copied!");
}

function saveConfig() {
  localStorage.setItem("webhookConfig", JSON.stringify(getEmbedJson()));
  alert("Config Saved!");
}

function loadConfig() {
  const data = JSON.parse(localStorage.getItem("webhookConfig")||"{}");
  if(!data.embeds) return;
  const e = data.embeds[0];
  document.getElementById("title").value=e.title||"";
  document.getElementById("description").value=e.description||"";
  document.getElementById("color").value="#"+("000000"+e.color.toString(16)).slice(-6);
  document.getElementById("authorName").value=e.author?.name||"";
  document.getElementById("authorUrl").value=e.author?.url||"";
  document.getElementById("authorIcon").value=e.author?.icon_url||"";
  document.getElementById("thumbnailUrl").value=e.thumbnail?.url||"";
  document.getElementById("imageUrl").value=e.image?.url||"";
  document.getElementById("footerText").value=e.footer?.text||"";
  document.getElementById("footerIcon").value=e.footer?.icon_url||"";
  fields = e.fields||[];
  document.getElementById("fields").innerHTML="";
  fields.forEach((f,i)=>addField());
  updatePreview();
}

function exportConfig() {
  const blob = new Blob([JSON.stringify(getEmbedJson(),null,2)],{type:"application/json"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download="config.json";
  a.click();
}

function importConfig(e) {
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = ev=>{
    localStorage.setItem("webhookConfig", ev.target.result);
    loadConfig();
  };
  reader.readAsText(file);
}

document.querySelectorAll("input,textarea").forEach(el=>el.addEventListener("input",updatePreview));
updatePreview();
</script>
</body>
</html>
